<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js">
    </script>
    <script>
        //1, 2, 3, 4, 5, 6, 8, 9, 10, 12, 15, 16, 18, 20, 24, 30, 36, 40, 45, 48, 60, 72, 80, 90, 120, 144, 180, 240, 360, 720
        //1, 2, 3, 5, 6, 9, 10, 15, 18, 25, 30, 45, 50, 75, 90, 150, 225, 450
        // at 45px by 45px there are 160 tiles.
        // there are 16 tiles on the top 
        // 10 lines of tiles.
        // 8 x 14 means inside the concreat wall there is 112 blocks. So 51 spaces sounds like a good idea!
        var rando = (Math.random() * 2) + 1 
        var matt = [
            [5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5],
            [5, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 5],
            [5, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 5],
            [5, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 5],
            [5, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 5],
            [5, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 5],
            [5, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 5],
            [5, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 5],
            [5, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 5],
            [5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5]
        ];  

        //This will set are start point to a random location within bounds.
        var r = Math.floor(Math.random() * 7 + 2)
        var rr = Math.floor(Math.random() * 13 + 2)
        var numOfSpcs = 0
        direction = 0

        console.log("STARTING AT \nheight : " + r + " \nwidth : " + rr)
        
        

       
        while(numOfSpcs < 75){
            
            direction = Math.floor(Math.random() * 8 + 1)

            if(direction == 1 && matt[r-1][rr] != 0 && matt[r-1][rr] != 5){
                r--
                matt[r][rr] = 0
                console.log("up - r : " + r + " rr : " + rr)
                numOfSpcs++   
            }
            else if(direction == 1 && matt[r-1][rr] != 5){
                r--
                console.log("up - r : " + r + " rr : " + rr)
                matt[r][rr] = 0   
            }
            
            if(direction == 2 && matt[r][rr+1] != 0 && matt[r][rr+1] != 5){
                rr++
                console.log("right - r : " + r + " rr : " + rr)
                matt[r][rr] = 0
                numOfSpcs++
            }
            else if(direction == 2 && matt[r][rr+1] != 5){
                rr++
                console.log("right - r : " + r + " rr : " + rr)
                matt[r][rr] = 0
            }

            if(direction == 3 && matt[r+1][rr] != 0 && matt[r+1][rr] != 5){
                r++
                console.log("down - r : " + r + " rr : " + rr)
                matt[r][rr] = 0
                numOfSpcs++
            }
            else if(direction == 3 && matt[r+1][rr] != 5){
                r++
                console.log("down - r : " + r + " rr : " + rr)
                matt[r][rr] = 0

            }

            if(direction == 4 && matt[r][rr-1] != 0 && matt[r][rr-1] != 5){
                rr--
                console.log("left - r : " + r + " rr : " + rr)
                matt[r][rr] = 0
                numOfSpcs++
            }
            else if(direction == 4 && matt[r][rr-1] != 5){
                rr--
                console.log("left - r : " + r + " rr : " + rr)
                matt[r][rr] = 0
            }
            
            if(direction == 5 && r - 3 > 0){
                for(var i = r-3; r >= i; r--){
                    if(matt[r][rr] == 1){
                        numOfSpcs++
                    }
                    matt[r][rr] = 0
                }
                r++
                console.log("up - r : " + r + " rr : " + rr)   
            }

            if(direction == 6 && rr + 3 < 15){
                for(var i = rr + 3; rr <= i; rr++){
                    if(matt[r][rr] == 1){
                        numOfSpcs++
                    }
                    matt[r][rr] = 0
                }
                rr--
                console.log("up - r : " + r + " rr : " + rr)   
            }

            if(direction == 7 && r + 3 < 9){
                for(var i = r+3; r <= i; r++){
                    if(matt[r][rr] == 1){
                        numOfSpcs++
                    }
                    matt[r][rr] = 0
                }
                r--
                console.log("up - r : " + r + " rr : " + rr)   
            }

            if(direction == 8 && rr - 3 > 0){
                for(var i = rr - 3; rr >= i; rr--){
                    if(matt[r][rr] == 1){
                        numOfSpcs++
                    }
                    matt[r][rr] = 0
                }
                rr++
                console.log("up - r : " + r + " rr : " + rr)   
            }

            console.log("number of spaces left is " + numOfSpcs)
        }
        
        // ******    These vars are used for character setting!
        var charSet = 0, h = 0, w = 0
        
        // ******   The following sets our character tile. ###UNCOMMENT BELOW
        while(charSet == 0){
            w++
            if(matt[h][w] == 0){
                matt[h][w] = 2
                charSet++
            }
            if(w == 14){
                w = 0
                h++
            }
        }        

        $(document).ready(function(){
            for(var h = 0; h < matt.length; h++){
                for(var w = 0; w < matt[h].length; w++){
                    if(matt[h][w] == 1 || matt[h][w] == 5){
                        $("#stage").append('<div id="testblock"><img src="pics/brick_block.png" alt="a wall" class=".wall"></div>')
                    }
                    else{
                        if(matt[h][w] == 2){
                            $("#stage").append('<div id="testblock"><img src="pics/SYNCstandf0g.png" id="char"></div>')    
                            charSet++
                        }
                        else{
                        $("#stage").append('<div id="testblock"></div>')
                        }
                    }
                }
            }
        })
        
    </script>
    <title>Man-Pac</title>
</head>
<body>
    <div id="stage">
    </div>
</body>
</html>